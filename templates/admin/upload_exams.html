{% block content %}
<div class="form-container">
  <a href="{{ url_for('admin_dashboard') }}" class="back-link">← Back to Admin Dashboard</a>

  <h2>Upload New Exam</h2>

  {% with messages = get_flashed_messages(with_categories=true) %}
    {% if messages %}
      <div class="flash-messages">
        {% for category, message in messages %}
          <div class="alert alert-{{ category }}">
            {{ message }}
            <button type="button" class="close-btn" aria-label="Close" onclick="this.parentElement.style.display='none'">×</button>
          </div>
        {% endfor %}
      </div>
    {% endif %}
  {% endwith %}

  <form method="POST" enctype="multipart/form-data">
    <div class="form-group">
      <label for="title">Title of exam (e.g., ICT CAT 1)</label>
      <input type="text" name="title" id="title" placeholder="Enter exam title" required>
    </div>

    <div class="form-group">
      <label for="course">Select Course</label>
      <select name="course" id="course" required>
        <option value="">-- Select Course --</option>
        {% for course in courses %}
          <option value="{{ course.id }}">{{ course.name }}</option>
        {% endfor %}
      </select>
    </div>

    <div class="form-group">
      <label for="subject">Select Subject</label>
      <select name="subject" id="subject" required>
        <option value="">-- Select Subject --</option>
        {% for subject in subjects %}
          <option value="{{ subject.id }}">{{ subject.name }}</option>
        {% endfor %}
      </select>
    </div>

    <div class="form-group">
      <label for="duration">Exam Duration (in minutes)</label>
      <input type="number" name="duration" id="duration" placeholder="Enter duration" required min="1" max="180">
    </div>

    <div class="form-group">
      <label for="quiz_file">Choose File</label>
      <input type="file" name="quiz_file" id="quiz_file" accept=".docx" required>
    </div>

    <button type="submit" class="submit-btn">Upload Quiz</button>
  </form>
</div>

{% endblock %}

<style>
  /* General body styling */
  body {
    font-family: 'Arial', sans-serif;
    background-color: #f4f7fb;
    margin: 0;
    padding: 0;
  }

  /* Form container styling */
  .form-container {
    background-color: white;
    padding: 2rem;
    margin: 2rem auto;
    width: 80%;
    max-width: 800px;
    border-radius: 8px;
    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
  }

  /* Back link styling */
  .back-link {
    text-decoration: none;
    color: #3498db;
    font-size: 1rem;
  }

  .back-link:hover {
    text-decoration: underline;
  }

  /* Form heading styling */
  h2 {
    font-size: 1.8rem;
    margin-bottom: 1rem;
    color: #333;
  }

  /* Flash messages styling */
  .flash-messages {
    margin-bottom: 1rem;
  }

  .flash-messages .alert {
    padding: 1rem;
    margin-bottom: 1rem;
    border-radius: 5px;
    display: flex;
    justify-content: space-between;
    align-items: center;
  }

  .alert-success {
    background-color: #28a745;
    color: white;
  }

  .alert-error {
    background-color: #dc3545;
    color: white;
  }

  .close-btn {
    background: transparent;
    border: none;
    font-size: 1.5rem;
    color: white;
    cursor: pointer;
  }

  /* Form field styling */
  .form-group {
    margin-bottom: 1.5rem;
  }

  label {
    font-size: 1rem;
    color: #555;
    margin-bottom: 0.5rem;
    display: block;
  }

  input[type="text"],
  input[type="number"],
  input[type="file"],
  select {
    width: 100%;
    padding: 0.8rem;
    border: 1px solid #ddd;
    border-radius: 5px;
    font-size: 1rem;
  }

  input[type="number"] {
    max-width: 120px;
  }

  select {
    cursor: pointer;
  }

  /* Button styling */
  .submit-btn {
    background-color: #3498db;
    color: white;
    padding: 1rem;
    border: none;
    border-radius: 5px;
    width: 100%;
    font-size: 1rem;
    cursor: pointer;
    transition: background-color 0.3s;
  }

  .submit-btn:hover {
    background-color: #2980b9;
  }

  /* Responsive design */
  @media (max-width: 768px) {
    .form-container {
      width: 95%;
    }
  }
</style>
